\# Налаштування Make.com Webhook

Цей документ описує, як підключити ваш сайт до платформи Make.com (колишня Integromat) за допомогою webhook.

## Кроки налаштування

### 1. Створення Webhook в Make.com

1. Увійдіть в свій акаунт на [make.com](https://make.com)
2. Створіть новий сценарій (Scenario)
3. Додайте модуль "Webhooks" → "Custom webhook"
4. Скопіюйте URL webhook, який згенерує Make
5. URL виглядатиме приблизно так: `https://hook.eu1.make.com/ваш-унікальний-ідентифікатор`

### 2. Налаштування в проекті

#### Варіант 1: Environment Variables (Рекомендований)

1. Створіть файл `.env` в корені проекту (якщо його немає)
2. Додайте ваш Make webhook URL:

```env
VITE_MAKE_WEBHOOK_URL=https://hook.eu1.make.com/ваш-унікальний-ідентифікатор
```

3. Перезапустіть сервер розробки:

```bash
npm run dev
```

#### Варіант 2: Пряме налаштування в коді

Відредагуйте файл `src/services/makeWebhook.ts`:

```typescript
constructor() {
  // Замініть 'YOUR_MAKE_WEBHOOK_URL_HERE' на ваш реальний URL
  this.webhookUrl = 'https://hook.eu1.make.com/ваш-унікальний-ідентифікатор';
}
```

### 3. Структура даних

Ваш Make webhook отримуватиме наступні дані:

```json
{
  "name": "Ім'я клієнта",
  "phone": "+380931234567",
  "question": "Текст питання",
  "timestamp": "17.10.2025, 14:30",
  "source": "contact-form",
  "utm_source": "google",
  "utm_medium": "cpc",
  "utm_campaign": "laser-cutting",
  "page_url": "https://yoursite.com/contact"
}
```

### 4. Налаштування обробки в Make

1. **Отримання даних:** Webhook автоматично отримає дані
2. **Фільтрація:** Додайте фільтри для обробки різних типів заявок
3. **Інтеграції:** Підключіть потрібні сервіси:
   - Google Sheets для збереження заявок
   - Gmail/Outlook для відправки сповіщень
   - CRM системи (Bitrix24, HubSpot тощо)
   - Telegram/Slack для миттєвих сповіщень
   - SMS сервіси для СМС повідомлень

### 5. Приклад Make сценарію

```
Webhook → Router → [
  ├── Google Sheets (додати рядок)
  ├── Gmail (надіслати лист менеджеру)
  ├── Telegram (повідомлення в чат)
  └── CRM (створити лід)
]
```

### 6. Тестування

1. Заповніть форму на сайті
2. Перевірте, чи надходять дані в Make
3. Переконайтеся, що всі інтеграції працюють коректно

### 7. Моніторинг

- Переглядайте логи в Make.com для відстеження помилок
- У консолі браузера будуть відображатися повідомлення про статус відправки
- При помилці відправки в Make, дані все одно збережуться в Google Sheets

## Переваги інтеграції з Make

- **Автоматизація:** Повна автоматизація обробки заявок
- **Гнучкість:** Легко додавати нові інтеграції без зміни коду
- **Надійність:** Fallback через Google Sheets якщо Make недоступний
- **Аналітика:** Детальне відстеження джерел заявок
- **Масштабованість:** Обробка необмеженої кількості заявок

## Troubleshooting

### Webhook не отримує дані
- Перевірте правильність URL
- Переконайтеся, що сценарій активний в Make
- Перевірте CORS налаштування

### Помилки в консолі
```javascript
// Для відладки додайте в консоль браузера:
console.log('Make webhook configured:', makeWebhookService.isConfigured());
console.log('Webhook URL:', makeWebhookService.getWebhookUrl());
```

### Дані не доходять до інтегрованих сервісів
- Перевірте налаштування фільтрів в Make
- Переконайтеся, що всі модулі правильно підключені
- Перевірте права доступу для інтегрованих сервісів

## Підтримка

Якщо виникли питання:
1. Перевірте логи Make.com
2. Подивіться консоль браузера на наявність помилок
3. Переконайтеся, що всі environment variables налаштовані правильно
